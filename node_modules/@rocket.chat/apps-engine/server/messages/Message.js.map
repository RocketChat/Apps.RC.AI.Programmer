{"version":3,"sources":["src/server/messages/Message.ts"],"names":[],"mappings":";;;AAKA,wCAAqC;AAErC,MAAa,OAAO;IA+ChB,IAAW,IAAI;QACX,OAAO,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,IAAW,IAAI,CAAC,IAAI;QAChB,IAAI,CAAC,KAAK,GAAG,IAAI,WAAI,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;IAC9C,CAAC;IAED,YAAmB,OAAiB,EAAU,OAAmB;QAAnB,YAAO,GAAP,OAAO,CAAY;QAC7D,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;IACjC,CAAC;IAED,IAAI,KAAK;QACL,OAAO;YACH,EAAE,EAAE,IAAI,CAAC,EAAE;YACX,MAAM,EAAE,IAAI,CAAC,MAAM;YACnB,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,MAAM,EAAE,IAAI,CAAC,MAAM;YACnB,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,YAAY,EAAE,IAAI,CAAC,YAAY;YAC/B,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,MAAM,EAAE,IAAI,CAAC,MAAM;YACnB,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,MAAM,EAAE,IAAI,CAAC,MAAM;YACnB,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,QAAQ,EAAE,IAAI,CAAC,QAAQ;SAC1B,CAAC;IACN,CAAC;IAEM,MAAM;QACT,OAAO,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAEM,QAAQ;QACX,OAAO,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAEM,OAAO;QACV,OAAO,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;CACJ;AAlGD,0BAkGC","file":"Message.js","sourcesContent":["import type { Block } from '@rocket.chat/ui-kit';\n\nimport type { IMessage, IMessageAttachment, IMessageFile, IMessageReactions } from '../../definition/messages';\nimport type { IUser, IUserLookup } from '../../definition/users';\nimport type { AppManager } from '../AppManager';\nimport { Room } from '../rooms/Room';\n\nexport class Message implements IMessage {\n    public id?: string;\n\n    public sender: IUser;\n\n    public text?: string;\n\n    public createdAt?: Date;\n\n    public updatedAt?: Date;\n\n    public editor?: IUser;\n\n    public editedAt?: Date;\n\n    public emoji?: string;\n\n    public avatarUrl?: string;\n\n    public alias?: string;\n\n    public attachments?: Array<IMessageAttachment>;\n\n    public reactions?: IMessageReactions;\n\n    public groupable?: boolean;\n\n    public parseUrls?: boolean;\n\n    public customFields?: { [key: string]: any };\n\n    public threadId?: string;\n\n    public file?: IMessageFile;\n\n    public blocks?: Array<Block>;\n\n    public starred?: Array<{ _id: string }>;\n\n    public pinned?: boolean;\n\n    public pinnedAt?: Date;\n\n    public pinnedBy?: IUserLookup;\n\n    private _ROOM: Room;\n\n    public get room(): Room {\n        return this._ROOM;\n    }\n\n    public set room(room) {\n        this._ROOM = new Room(room, this.manager);\n    }\n\n    public constructor(message: IMessage, private manager: AppManager) {\n        Object.assign(this, message);\n    }\n\n    get value(): object {\n        return {\n            id: this.id,\n            sender: this.sender,\n            text: this.text,\n            createdAt: this.createdAt,\n            updatedAt: this.updatedAt,\n            editor: this.editor,\n            editedAt: this.editedAt,\n            emoji: this.emoji,\n            avatarUrl: this.avatarUrl,\n            alias: this.alias,\n            attachments: this.attachments,\n            reactions: this.reactions,\n            groupable: this.groupable,\n            parseUrls: this.parseUrls,\n            customFields: this.customFields,\n            threadId: this.threadId,\n            room: this.room,\n            file: this.file,\n            blocks: this.blocks,\n            starred: this.starred,\n            pinned: this.pinned,\n            pinnedAt: this.pinnedAt,\n            pinnedBy: this.pinnedBy,\n        };\n    }\n\n    public toJSON() {\n        return this.value;\n    }\n\n    public toString() {\n        return this.value;\n    }\n\n    public valueOf() {\n        return this.value;\n    }\n}\n"]}