{"version":3,"sources":["src/server/accessors/SchedulerModify.ts"],"names":[],"mappings":";;;;;;;;;;;;AAIA,SAAS,iBAAiB,CAAC,KAAa,EAAE,KAAa;IACnD,OAAO,KAAK,CAAC,QAAQ,CAAC,IAAI,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,IAAI,KAAK,EAAE,CAAC;AACrE,CAAC;AAED,MAAa,eAAe;IACxB,YAA6B,MAAuB,EAAmB,KAAa;QAAvD,WAAM,GAAN,MAAM,CAAiB;QAAmB,UAAK,GAAL,KAAK,CAAQ;IAAG,CAAC;IAE3E,YAAY,CAAC,GAAqB;;YAC3C,OAAO,IAAI,CAAC,MAAM,CAAC,cAAc,iCAAM,GAAG,KAAE,EAAE,EAAE,iBAAiB,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,KAAI,IAAI,CAAC,KAAK,CAAC,CAAC;QACzG,CAAC;KAAA;IAEY,iBAAiB,CAAC,GAAuB;;YAClD,OAAO,IAAI,CAAC,MAAM,CAAC,mBAAmB,iCAAM,GAAG,KAAE,EAAE,EAAE,iBAAiB,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,KAAI,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9G,CAAC;KAAA;IAEY,SAAS,CAAC,KAAa;;YAChC,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QACrF,CAAC;KAAA;IAEY,aAAa;;YACtB,OAAO,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACnD,CAAC;KAAA;CACJ;AAlBD,0CAkBC","file":"SchedulerModify.js","sourcesContent":["import type { ISchedulerModify } from '../../definition/accessors';\nimport type { IOnetimeSchedule, IRecurringSchedule } from '../../definition/scheduler';\nimport type { SchedulerBridge } from '../bridges';\n\nfunction createProcessorId(jobId: string, appId: string): string {\n    return jobId.includes(`_${appId}`) ? jobId : `${jobId}_${appId}`;\n}\n\nexport class SchedulerModify implements ISchedulerModify {\n    constructor(private readonly bridge: SchedulerBridge, private readonly appId: string) {}\n\n    public async scheduleOnce(job: IOnetimeSchedule): Promise<void | string> {\n        return this.bridge.doScheduleOnce({ ...job, id: createProcessorId(job.id, this.appId) }, this.appId);\n    }\n\n    public async scheduleRecurring(job: IRecurringSchedule): Promise<void | string> {\n        return this.bridge.doScheduleRecurring({ ...job, id: createProcessorId(job.id, this.appId) }, this.appId);\n    }\n\n    public async cancelJob(jobId: string): Promise<void> {\n        return this.bridge.doCancelJob(createProcessorId(jobId, this.appId), this.appId);\n    }\n\n    public async cancelAllJobs(): Promise<void> {\n        return this.bridge.doCancelAllJobs(this.appId);\n    }\n}\n"]}